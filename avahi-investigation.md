Avahi config

The Avahi daemon configuration is managed through the `/etc/avahi/avahi-daemon.conf` file, which defines settings for multicast DNS (mDNS) and DNS Service Discovery (DNS-SD)  The main configuration sections include `[server]`, `[wide-area]`, `[publish]`, `[reflector]`, and `[rlimits]`.

In the `[server]` section, key parameters control network behavior. `use-ipv4=yes` enables IPv4 support by default, while `use-ipv6=yes` enables IPv6 support, which is automatically disabled if no IPv6 addresses are present  The `allow-interfaces` option specifies which network interfaces Avahi should listen on, with an empty list meaning all interfaces except loopback and point-to-point are used  Conversely, `deny-interfaces` specifies interfaces to ignore, taking precedence over `allow-interfaces`  The `enable-dbus=yes` setting allows Avahi to connect to D-Bus for an object-oriented client API  `disallow-other-stacks=yes` ensures no other process can bind to UDP port 5353, preventing conflicts with other mDNS implementations 

The `[wide-area]` section includes `enable-wide-area=yes`, which enables wide-area DNS-SD, resolving domains ending in `.local` via mDNS and all others via unicast DNS  In the `[publish]` section, `publish-addresses=yes` registers mDNS address records for all local IP addresses, which is recommended for service publishing  `publish-hinfo=no` disables the publication of HINFO records containing OS and CPU information, enhancing privacy  `publish-workstation=no` disables the registration of a `_workstation._tcp` service, which is useful for browsing LAN hosts but not required by specifications  `add-service-cookie=no` disables the inclusion of a random "cookie" TXT entry in services, which can help identify identical services across interfaces 

Additional settings include `ratelimit-interval-usec=1000000` and `ratelimit-burst=1000`, which control the rate of mDNS packet generation to prevent network flooding  The `cache-entries-max=4096` and `clients-max=4096` parameters limit the number of cached records and concurrent D-Bus clients, respectively  The configuration file also supports static host entries and service definitions, which can be managed via Ansible roles such as `debops.avahi` 